{"version":3,"sources":["../node_modules/gun sync","App.js","serviceWorker.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","log","window","console","MyResponsiveBubble","React","memo","graph","valuesEnabled","search","useState","data","setData","useEffect","a","getRootData","newData","root","margin","top","right","bottom","left","identity","colorBy","label","x","enableLabels","value","colors","scheme","padding","labelSkipRadius","labelTextColor","borderWidth","borderColor","from","defs","type","background","color","rotation","lineWidth","spacing","fill","match","depth","animate","motionStiffness","motionDamping","require","gunListeners","Set","vertices","props","edges","authUser","user","username","password","Promise","reject","auth","cache","Map","stringify","obj","JSON","replace","decodeNode","node","propsJson","has","decrypted","get","gun","_","sea","SEA","verify","pub","verified","decrypt","set","newGraph","loc","is","nodes","map","Object","prop","reduce","b","sort","localeCompare","i","length","innerNodes","split","currObj","j","innerNode","currCurrObj","children","find","label2","fullPath","name","valueOn","valueOff","nodeValue","Math","random","indexOf","filter","App","links","setGraph","endpoint","setEndpoint","setRoot","setSearch","setUsername","setPassword","Gun","setGun","getGunRoot","useCallback","currentReference","forEach","soul","off","delete","setValuesEnabled","toggleValues","loadEndpoint","newGun","_graph","opt","peers","getPath","path","resetGraph","removeNode","warn","nodeId","findIndex","error","splice","removeUnreferencedNode","index","edge","target","addGunListenerRef","useRef","handleNodeChange","change","oldNodes","oldLinks","idx","newProps","newVertices","newEdges","propsToRemove","childEdgeIndex","source","propVal","undefined","newNodeSoul","push","current","p","includes","addGunListener","on","add","getDataFromGun","parentId","_reject","process","nodeProperties","childSoul","vertex","childGraph","once","insertDataFromGun","className","style","paddingTop","onChange","ev","onClick","height","Boolean","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.12924f14.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 161;","import './App.css';\n\nimport Gun from 'gun';\nimport 'gun/sea';\nimport React, { useEffect, useState } from 'react';\n\n// import { ResponsiveCirclePacking } from '@nivo/circle-packing'\nimport { ResponsiveBubble } from '@nivo/circle-packing'\n\n\nfunction log(...p) {\n  if (window.log) {\n    console.log(...p);\n  }\n}\n\n// make sure parent container have a defined height when using\n// responsive component, otherwise height will be 0 and\n// no chart will be rendered.\n// website examples showcase many properties,\n// you'll often use just a few of them.\nconst MyResponsiveBubble = React.memo(({ graph, valuesEnabled, search }) => {\n\n  // const [zoomedId, setZoomedId] = useState(null);\n  const [data, setData] = useState({});\n\n  useEffect(() => {\n    (async () => {\n      const newData = await getRootData(graph, valuesEnabled, search);\n      setData(newData)\n    })()\n  }, [graph, valuesEnabled, search])\n\n  return (\n    // <ResponsiveCirclePacking\n    <ResponsiveBubble\n      // data={root}\n      root={data}\n      margin={{ top: 20, right: 20, bottom: 20, left: 20 }}\n      // id=\"fullPath\"\n      identity=\"name\"\n      colorBy=\"depth\"\n      label={x => x.data.label}\n      enableLabels={true}\n      value=\"loc\"\n      // zoomedId={zoomedId}\n      // onClick={node => {\n      //   setZoomedId(zoomedId === node.id ? null : node.id)\n      // }}\n      colors={{ scheme: 'spectral' }}\n      padding={0}\n      labelSkipRadius={0}\n      labelTextColor=\"black\"\n      borderWidth={2}\n      borderColor={{ from: 'color' }}\n      defs={[\n        {\n          id: 'lines',\n          type: 'patternLines',\n          background: 'none',\n          color: 'inherit',\n          rotation: -75,\n          lineWidth: 5,\n          spacing: 8\n        }\n      ]}\n      fill={[{ match: { depth: 1 }, id: 'lines' }]}\n      animate={true}\n      motionStiffness={90}\n      motionDamping={12}\n    />\n  )\n})\n\n\n// const gun = new Gun('http://192.168.178.64:8765/gun');\nrequire('gun/lib/open.js');\n\nlet gunListeners = new Set();\n\nconst vertices = [{ id: 'gun', props: { root: '' } }];\nconst edges = [];\n\n// const sleep = async (ms) => {\n//   return new Promise((resolve, _reject) => {\n//     setTimeout(() => {\n//       resolve();\n//     }, ms);\n//   });\n// };\n\nconst authUser = (user, username, password) => {\n  return new Promise((resolve, reject) => {\n    try {\n      user.auth(username, password, resolve)\n    } catch (e) {\n      reject(e)\n    }\n  });\n};\n\nfunction App() {\n  const [graph, setGraph] = useState({\n    nodes: vertices,\n    links: edges,\n  });\n\n  const [endpoint, setEndpoint] = useState('http://localhost:8765/gun');\n\n  const [root, setRoot] = useState('');\n  const [search, setSearch] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n\n  const [gun, setGun] = useState(new Gun());\n\n  useEffect(() => {\n    (async () => {\n      if (username.length > 0 && password.length > 0) {\n        const ack = await authUser(gun.user(), username, password);\n        log('ack', ack);\n      }\n    })()\n  }, [gun, username, password]);\n\n  const getGunRoot = React.useCallback(() => {\n    let currentReference = gun;\n    if (username.length > 0 && password.length > 0) {\n      currentReference = gun.user();\n    }\n    return currentReference;\n  }, [gun, username, password]);\n\n\n  useEffect(() => {\n    gunListeners.forEach((soul) => {\n      const gunRoot = getGunRoot();\n      gunRoot.get(soul).off();\n      gunListeners.delete(soul);\n    });\n  }, [gun, getGunRoot]);\n\n  const [valuesEnabled, setValuesEnabled] = useState(true);\n\n  const toggleValues = React.useCallback(() => {\n    setValuesEnabled(!valuesEnabled);\n  }, [setValuesEnabled, valuesEnabled]);\n\n  const loadEndpoint = React.useCallback(() => {\n    const newGun = new Gun(endpoint);\n    setGun(newGun);\n    setGraph((_graph) => {\n      return {\n        nodes: vertices,\n        links: edges,\n      };\n    });\n    window.gun = newGun;\n  }, [setGun, setGraph, endpoint]);\n\n  useEffect(() => {\n    log(\n      `Peers set to: ${\n        Object.keys(gun._.opt.peers).length > 0\n          ? Object.keys(gun._.opt.peers).reduce(\n            (a, b) => a + ', ' + b\n          )\n          : 'No peers connected'\n      }`\n    );\n  }, [gun]);\n\n  const getPath = React.useCallback((path) => {\n    let currentReference = getGunRoot();\n\n    for (let i = 0; i < path.length; i++) {\n      log('currentReference', path, currentReference, 'next:', path[i]);\n      currentReference = currentReference.get(path[i]);\n    }\n    return currentReference;\n  }, [getGunRoot]);\n\n  const resetGraph = React.useCallback(() => {\n    setGraph(() => {\n      return {\n        nodes: vertices,\n        links: edges,\n      };\n    });\n  }, [setGraph]);\n\n  const removeNode = React.useCallback((soul) => {\n    let gun = getGunRoot();\n    gun.get(soul).off();\n    setGraph((data) => {\n      let nodes = data.nodes;\n      if (nodes.length <= 1) {\n        console.warn(\n          `Didn't delete node \"${soul}\", it is the last node`\n        );\n        return data;\n      }\n      log(`Searching node with soul: ${soul}`);\n      const nodeId = nodes.findIndex((node) => node.id === soul);\n      if (nodeId === -1) {\n        console.error(`No node found!`);\n        return data;\n      }\n      log(`Removing node at index: ${nodeId}`);\n      nodes.splice(nodeId, 1);\n      return { ...data, nodes: nodes };\n    });\n  }, [getGunRoot]);\n\n  const removeUnreferencedNode = React.useCallback((soul) => {\n    log(`Removing unreferenced Nodes`);\n    const index = graph.links.findIndex((edge) => edge.target === soul);\n    log(`Node still referenced?: ${index === -1 ? 'No' : 'Yes'}`);\n    if (index === -1) {\n      removeNode(soul);\n    }\n  }, [graph, removeNode]);\n\n  const addGunListenerRef = React.useRef(null);\n\n  const handleNodeChange = React.useCallback((change) => {\n    setGraph((data) => {\n      const id = change['_']['#'];\n\n      log(`Setting data of node: \"${id}\"`);\n\n      if (!data) return data;\n\n      let oldNodes = data.nodes;\n      let oldLinks = data.links;\n\n      const idx = oldNodes.findIndex((node) => node.id === id);\n\n      if (idx === -1) {\n        console.error('id not found');\n        return data;\n      }\n      log(`Found node with index: \"${idx}\"`);\n\n      let newProps = {};\n      let newVertices = [];\n      let newEdges = [];\n      let propsToRemove = [];\n\n      for (const prop in change) {\n        // Ignore the soul\n        if (prop === '_') continue;\n        // Is this property currently given to a child node?\n        const childEdgeIndex = oldLinks.findIndex((edge) => {\n          return edge.label === prop && edge.source === id;\n        });\n        // If so, remove the edge\n        if (childEdgeIndex !== -1) {\n          removeUnreferencedNode(oldLinks[childEdgeIndex].target);\n          oldLinks.splice(childEdgeIndex, 1);\n        }\n        // Property is new child Node\n        const propVal = change[prop];\n        if (propVal && propVal['#'] !== undefined) {\n          // Add new node\n          const newNodeSoul = propVal['#'];\n          newVertices.push({\n            id: newNodeSoul,\n            props: {},\n          });\n          newEdges.push({\n            source: id,\n            target: newNodeSoul,\n            label: prop,\n          });\n          addGunListenerRef.current(newNodeSoul);\n          // Remove old property from parent if it exists\n          if (oldNodes[idx].props[prop] !== undefined) {\n            propsToRemove.push(prop);\n          }\n          continue;\n        }\n        // Add property to node props\n        newProps[prop] = change[prop];\n      }\n\n      log('Adding props');\n      log(newProps);\n\n      for (const p in oldNodes[idx]['props']) {\n        if (!propsToRemove.includes(p) && newProps[p] === undefined) {\n          newProps[p] = oldNodes[idx]['props'][p];\n        }\n      }\n\n      oldNodes[idx]['props'] = newProps;\n\n      oldNodes.push(...newVertices);\n      oldLinks.push(...newEdges);\n\n      log('New nodes');\n      log(oldNodes);\n\n      return {\n        nodes: oldNodes,\n        links: oldLinks,\n      };\n    });\n  }, [addGunListenerRef, removeUnreferencedNode]);\n\n  const addGunListener = React.useCallback((soul) => {\n    if (!gunListeners.has(soul)) {\n      console.log('Added listener to node: ' + soul);\n\n      let gun = getGunRoot();\n      gun.get(soul).on(handleNodeChange, { change: true });\n      gunListeners.add(soul);\n    }\n  }, [getGunRoot, handleNodeChange]);\n\n  React.useEffect(() => {\n    addGunListenerRef.current = addGunListener;\n  }, [addGunListener]);\n\n\n  const getDataFromGun = React.useCallback((path, parentId) => {\n    return new Promise(async (resolve, _reject) => {\n      let graph = { vertices: [], edges: [] };\n      // const gun = getGunRoot();\n      const node = await getPath(path);\n      log(\"node\", node);\n\n      const process = async (nodeProperties) => {\n        const soul = nodeProperties['_']['#'];\n\n        addGunListener(soul);\n\n        let props = {};\n        for (let prop in nodeProperties) {\n          if (prop === '_') continue;\n          if (\n            nodeProperties[prop] &&\n            nodeProperties[prop]['#'] !== undefined\n          ) {\n            const childSoul = nodeProperties[prop]['#'];\n            // If the vertex is already listed (referenceed multiple times)\n            if (\n              graph.vertices.findIndex(\n                (vertex) => vertex.id === childSoul\n              ) !== -1\n            ) {\n              graph.edges.push({\n                source: soul,\n                target: childSoul,\n                label: prop,\n              });\n              continue;\n            }\n            let childGraph = await getDataFromGun(\n              [...path, prop],\n              soul\n            );\n            graph.vertices = [\n              ...graph.vertices,\n              ...childGraph.vertices,\n            ];\n            graph.edges = [...graph.edges, ...childGraph.edges];\n            continue;\n          }\n          props[prop] = nodeProperties[prop];\n        }\n        graph.vertices.push({\n          id: soul,\n          props,\n        });\n        if (parentId !== null) {\n          graph.edges.push({\n            source: parentId,\n            target: soul,\n            label: path[path.length - 1],\n          });\n        }\n        log('Got Data from Graph:');\n        log(graph);\n\n        resolve(graph);\n      }\n      if (node['_']['#']) {\n        await process(node);\n      } else {\n        node.once(process);\n      }\n    });\n  }, [getPath, addGunListener]);\n\n  const insertDataFromGun = React.useCallback(async (path, parentId) => {\n    resetGraph();\n    const graph = await getDataFromGun(path, parentId);\n\n    log(graph.vertices);\n    log(graph.edges);\n\n    setGraph(() => {\n      return {\n        nodes: graph.vertices || vertices,\n        links: graph.edges || edges,\n      };\n    });\n    removeUnreferencedNode('gun');\n  }, [setGraph, resetGraph, getDataFromGun, removeUnreferencedNode]);\n\n\n  // const _graphConfig = {\n  //   width: 800,\n  //   height: 800,\n  //   directed: true,\n  //   nodeHighlightBehavior: true,\n  //   staticGraphWithDragAndDrop: false, // If false, can be removed\n  //   automaticRearrangeAfterDropNode: false, // If false, can be removed\n  //   node: {\n  //     renderLabel: false,\n  //     size: 1000,\n  //     viewGenerator: (node) => <Vertex node={node} />,\n  //   },\n  //   link: {\n  //     highlightColor: 'blue',\n  //     renderLabel: true,\n  //     highlightFontWeight: 'bold',\n  //     semanticStrokeWidth: true,\n  //     fontSize: 12,\n  //   },\n  //   d3: {\n  //     gravity: -1000,\n  //     linkLength: 50,\n  //   },\n  // };\n\n  // const _windowStyle = {\n  //   backgroundColor: '#282828',\n  //   padding: '2px',\n  // };\n  //\n  // const _graphStyle = {\n  //   backgroundColor: '#FFF',\n  // };\n\n  log('graph:', graph);\n  window.graph = graph;\n\n  return (\n    <div className=\"App\" style={{ paddingTop: '600px' }}>\n      <label>Endpoint </label>\n      <input\n        value={endpoint}\n        onChange={(ev) => {\n          setEndpoint(ev.target.value);\n        }}\n        type=\"text\"\n      />\n      <label>Root </label>\n      <input\n        value={root}\n        onChange={(ev) => {\n          setRoot(ev.target.value);\n        }}\n        type=\"text\"\n      />\n      <label>Username </label>\n      <input\n        value={username}\n        onChange={(ev) => {\n          setUsername(ev.target.value);\n        }}\n        type=\"text\"\n      />\n      <label>Password </label>\n      <input\n        value={password}\n        onChange={(ev) => {\n          setPassword(ev.target.value);\n        }}\n        type=\"password\"\n      />\n      <label>Search </label>\n      <input\n        value={search}\n        onChange={(ev) => {\n          setSearch(ev.target.value);\n        }}\n        type=\"text\"\n      />\n      <br />\n      <button onClick={() => insertDataFromGun([root], null)}>\n        Load Data from Gun\n      </button>\n      <button onClick={() => loadEndpoint()}>Load Endpoint</button>\n\n      <button onClick={() => toggleValues()}>Toggle Values</button>\n\n      <div style={{ height: \"1100px\", color: \"black\" }}>\n        <MyResponsiveBubble graph={graph} valuesEnabled={valuesEnabled} search={search} />\n      </div>\n\n      {/*<div style={windowStyle}>*/}\n      {/*  <div style={graphStyle}>*/}\n      {/*    <Graph id=\"graph-id\" data={graph} config={graphConfig} />*/}\n      {/*  </div>*/}\n      {/*</div>*/}\n\n    </div>\n  );\n}\n\nconst cache = new Map();\n\nconst stringify=(obj) => {\n  return JSON\n    .stringify(obj, null, 4)\n    .replace(/\\\\/g, \"\")\n    .replace(/,/g, \",\\r\\n\")\n    .replace(\"\\r\\n\\r\\n\", \"\\r\\n\");\n}\n\nconst decodeNode = async (node) => {\n  const propsJson = stringify(node.props);\n\n  let decrypted;\n  if(cache.has(propsJson)) {\n    decrypted = cache.get(propsJson);\n  } else {\n    const keys = node.props && window.gun ? window.gun.user()._.sea : null;\n    const verified = keys ? await window.SEA.verify(node.props, keys.pub) : null;\n    decrypted = keys ? await window.SEA.decrypt(verified, keys) : null;\n    decrypted = decrypted != null ? stringify(decrypted) : propsJson;\n    cache.set(propsJson, decrypted);\n  }\n\n  return decrypted;\n};\n\nconst getRootData = async (graph, valuesEnabled, search) => {\n  const newGraph = {\n    \"name\": \"root\",\n    label: 'root',\n    color: `hsl(0, 70%, 50%)`,\n    loc: 1\n  };\n\n  const user = window.gun ? window.gun.user().is : null;\n  let pub = user ? user.pub : '';\n\n  const nodes = graph.nodes.map((node) => {\n      return Object.keys(node.props).map((prop) => ({\n        id: `${node.id.replace(pub, '')}/${prop}`,\n        props: node.props[prop]\n      }))\n    }).reduce((a, b) => [...a, ...b])\n  ;\n  // log('nodes', nodes);\n\n  nodes.sort((a, b) => a.id.localeCompare(b.id));\n\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    const innerNodes = node.id.split(\"/\");\n\n    let currObj = newGraph;\n    for (let j = 0; j < innerNodes.length; j++) {\n      const innerNode = innerNodes[j];\n\n      let currCurrObj = (currObj.children || []).find((x) => x.label2 === innerNode)\n\n      if (j === innerNodes.length - 1) {\n      }\n\n      if (!currCurrObj) {\n        let x = {\n          fullPath: node.id,\n          name: innerNode,\n          label: innerNode,\n          label2: innerNode,\n          loc: 15\n        }\n        currObj.children = [...currObj.children || [], x];\n        currObj = x;\n      } else {\n        currObj = currCurrObj;\n      }\n\n      const valueOn = 3;\n      const valueOff = 0.3;\n\n      if (j === innerNodes.length - 1) {\n        const nodeValue = await decodeNode(node);\n        currObj.name = `random:${Math.random()}\\r\\n\\r\\n${node.id}\\r\\n${nodeValue}`;\n\n        currObj.fullPath = node.id;\n        currObj.label2 = innerNode;\n        // currObj.name = {a:1,b:2};\n        currObj.label = !valuesEnabled ? `${innerNode}${(\"/\" + innerNodes[j - 1])}` : `${innerNode} ${nodeValue}`;\n        currObj.label = search === '' ? currObj.label : (currObj.name.indexOf(search) >= 0 ? currObj.label : '');\n        // currObj.color = `hsl(${Math.round(255 * Math.random())}, 70%, 50%)`;\n        currObj.loc = Object.keys(node.props || {}).length > 0 ? valueOn : valueOff;\n\n        // currObj.children = currObj.loc === valueOff ? [] : Object.keys(node.props).map((key) => ({\n        //     fullPath: node.id + \"key\",\n        //     name: key,\n        //     label: node.props[key],\n        //     loc: valueOn\n        //   }))\n      } else {\n        if (!currObj.children) {\n          currObj.children = [\n            {\n              fullPath: node.id,\n              name: innerNode,\n              label: search === '' ? innerNode : (innerNode.indexOf(search) >= 0 ? innerNode : ''),\n              loc: valueOff\n            }\n          ]\n        }\n      }\n\n      if ((currObj.children || []).length > 1\n        && currObj.children.find((x) => x.loc === valueOn)\n        && !currObj.children.find((x) => x.loc === valueOff && (x.children || []).length > 0)) {\n        currObj.children = currObj.children.filter((x) => x.loc !== valueOff)\n      }\n    }\n  }\n\n  return newGraph;\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}