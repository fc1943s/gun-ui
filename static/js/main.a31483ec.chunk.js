(this["webpackJsonpgun-ui"]=this["webpackJsonpgun-ui"]||[]).push([[0],{161:function(e,n){function t(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=161},213:function(e,n,t){},215:function(e,n,t){},353:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(92),o=t.n(c),i=(t(213),t(24)),u=t(128),s=t(8),l=t.n(s),d=t(29),f=t(12),b=(t(215),t(118)),p=t.n(b),h=(t(218),t(192)),g=t(13);function v(){var e;window.log&&(e=console).log.apply(e,arguments)}var j=function(e){var n=e.root,t=Object(r.useState)(null),a=Object(f.a)(t,2);a[0],a[1];return Object(g.jsx)(h.a,{root:n,margin:{top:20,right:20,bottom:20,left:20},identity:"name",colorBy:"depth",label:function(e){return e.data.label},enableLabels:!0,value:"loc",colors:{scheme:"spectral"},padding:0,labelSkipRadius:0,labelTextColor:"black",borderWidth:2,borderColor:{from:"color"},defs:[{id:"lines",type:"patternLines",background:"none",color:"inherit",rotation:-75,lineWidth:5,spacing:8}],fill:[{match:{depth:1},id:"lines"}],animate:!0,motionStiffness:90,motionDamping:12})};t(352);var O=new Set,x=[{id:"gun",props:{root:""}}],k=[],w=function(e,n,t){return new Promise((function(r,a){try{e.auth(n,t,r)}catch(c){a(c)}}))};var m=function(e,n,t){var r={name:"root",label:"root",color:"hsl(0, 70%, 50%)",loc:1},a=window.gun?window.gun.user().is:null,c=a?a.pub:"",o=e.nodes.map((function(e){return Object.keys(e.props).map((function(n){return{id:"".concat(e.id.replace(c,""),"/").concat(n),props:e.props[n]}}))})).reduce((function(e,n){return[].concat(Object(i.a)(e),Object(i.a)(n))}));o.sort((function(e,n){return e.id.localeCompare(n.id)}));for(var u=0;u<o.length;u++)for(var s=o[u],l=s.id.split("/"),d=r,f=function(e){var r=l[e],a=(d.children||[]).find((function(e){return e.label2===r}));if(l.length,a)d=a;else{var c={fullPath:s.id,name:r,label:r,label2:r,loc:15};d.children=[].concat(Object(i.a)(d.children||[]),[c]),d=c}var o=.3;if(e===l.length-1){var u=JSON.stringify(s.props,null,4).replace(/\\/g,"").replace(/,/g,",\r\n");d.fullPath=s.id,d.label2=r,d.name="".concat(s.id,"\r\n\r\n").concat(u),d.label=n?d.name:"".concat(r).concat("/"+l[e-1]),d.label=""===t||d.name.indexOf(t)>=0?d.label:"",d.loc=Object.keys(s.props||{}).length>0?3:o}else d.children||(d.children=[{fullPath:s.id,name:r,label:r,loc:o}]);(d.children||[]).length>1&&d.children.find((function(e){return 3===e.loc}))&&!d.children.find((function(e){return e.loc===o&&(e.children||[]).length>0}))&&(d.children=d.children.filter((function(e){return e.loc!==o})))},b=0;b<l.length;b++)f(b);return r},y=function(){var e=Object(r.useState)({nodes:x,links:k}),n=Object(f.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)("http://localhost:8765/gun"),s=Object(f.a)(o,2),b=s[0],h=s[1],y=Object(r.useState)("GunRecoil"),C=Object(f.a)(y,2),S=C[0],E=C[1],N=Object(r.useState)(""),_=Object(f.a)(N,2),P=_[0],R=_[1],D=Object(r.useState)(""),I=Object(f.a)(D,2),L=I[0],G=I[1],W=Object(r.useState)(""),A=Object(f.a)(W,2),B=A[0],J=A[1],T=Object(r.useState)(new p.a),U=Object(f.a)(T,2),F=U[0],Y=U[1];Object(r.useEffect)((function(){Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(L.length>0&&B.length>0)){e.next=5;break}return e.next=3,w(F.user(),L,B);case 3:v("ack",e.sent);case 5:case"end":return e.stop()}}),e)})))()}),[F,L,B]);var M=a.a.useCallback((function(){var e=F;return L.length>0&&B.length>0&&(e=F.user()),e}),[F,L,B]);Object(r.useEffect)((function(){O.forEach((function(e){M().get(e).off(),O.delete(e)}))}),[F,M]);var V=Object(r.useState)(!0),$=Object(f.a)(V,2),q=$[0],z=$[1],H=a.a.useCallback((function(){z(!q)}),[z,q]),K=a.a.useCallback((function(){var e=new p.a(b);Y(e),c((function(e){return{nodes:x,links:k}})),window.gun=e}),[Y,c,b]);Object(r.useEffect)((function(){v("Peers set to: ".concat(Object.keys(F._.opt.peers).length>0?Object.keys(F._.opt.peers).reduce((function(e,n){return e+", "+n})):"No peers connected"))}),[F]);var Q=a.a.useCallback((function(e){for(var n=M(),t=0;t<e.length;t++)v("currentReference",e,n,"next:",e[t]),n=n.get(e[t]);return n}),[M]),X=a.a.useCallback((function(){c((function(){return{nodes:x,links:k}}))}),[c]),Z=a.a.useCallback((function(e){M().get(e).off(),c((function(n){var t=n.nodes;if(t.length<=1)return console.warn("Didn't delete node \"".concat(e,'", it is the last node')),n;v("Searching node with soul: ".concat(e));var r=t.findIndex((function(n){return n.id===e}));return-1===r?(console.error("No node found!"),n):(v("Removing node at index: ".concat(r)),t.splice(r,1),Object(u.a)(Object(u.a)({},n),{},{nodes:t}))}))}),[M]),ee=a.a.useCallback((function(e){v("Removing unreferenced Nodes");var n=t.links.findIndex((function(n){return n.target===e}));v("Node still referenced?: ".concat(-1===n?"No":"Yes")),-1===n&&Z(e)}),[t,Z]),ne=a.a.useRef(null),te=a.a.useCallback((function(e){c((function(n){var t=e._["#"];if(v('Setting data of node: "'.concat(t,'"')),!n)return n;var r=n.nodes,a=n.links,c=r.findIndex((function(e){return e.id===t}));if(-1===c)return console.error("id not found"),n;v('Found node with index: "'.concat(c,'"'));var o={},i=[],u=[],s=[],l=function(n){if("_"===n)return"continue";var l=a.findIndex((function(e){return e.label===n&&e.source===t}));-1!==l&&(ee(a[l].target),a.splice(l,1));var d=e[n];if(d&&void 0!==d["#"]){var f=d["#"];return i.push({id:f,props:{}}),u.push({source:t,target:f,label:n}),ne.current(f),void 0!==r[c].props[n]&&s.push(n),"continue"}o[n]=e[n]};for(var d in e)l(d);for(var f in v("Adding props"),v(o),r[c].props)s.includes(f)||void 0!==o[f]||(o[f]=r[c].props[f]);return r[c].props=o,r.push.apply(r,i),a.push.apply(a,u),v("New nodes"),v(r),{nodes:r,links:a}}))}),[ne,ee]),re=a.a.useCallback((function(e){O.has(e)||(console.log("Added listener to node: "+e),M().get(e).on(te,{change:!0}),O.add(e))}),[M,te]);a.a.useEffect((function(){ne.current=re}),[re]);var ae=a.a.useCallback((function(e,n){return new Promise(function(){var t=Object(d.a)(l.a.mark((function t(r,a){var c,o,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={vertices:[],edges:[]},M(),t.next=4,Q(e);case 4:if(v("node",o=t.sent),u=function(){var t=Object(d.a)(l.a.mark((function t(a){var o,u,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=a._["#"],re(o),u={},t.t0=l.a.keys(a);case 4:if((t.t1=t.t0()).done){t.next=16;break}if("_"!==(s=t.t1.value)){t.next=8;break}return t.abrupt("continue",4);case 8:if(!a[s]||void 0===a[s]["#"]){t.next=13;break}return t.delegateYield(l.a.mark((function n(){var t,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=a[s]["#"],-1===c.vertices.findIndex((function(e){return e.id===t}))){n.next=4;break}return c.edges.push({source:o,target:t,label:s}),n.abrupt("return","continue");case 4:return n.next=6,ae([].concat(Object(i.a)(e),[s]),o);case 6:return r=n.sent,c.vertices=[].concat(Object(i.a)(c.vertices),Object(i.a)(r.vertices)),c.edges=[].concat(Object(i.a)(c.edges),Object(i.a)(r.edges)),n.abrupt("return","continue");case 10:case"end":return n.stop()}}),n)}))(),"t2",10);case 10:if("continue"!==t.t2){t.next=13;break}return t.abrupt("continue",4);case 13:u[s]=a[s],t.next=4;break;case 16:c.vertices.push({id:o,props:u}),null!==n&&c.edges.push({source:n,target:o,label:e[e.length-1]}),v("Got Data from Graph:"),v(c),r(c);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!o._["#"]){t.next=12;break}return t.next=10,u(o);case 10:t.next=13;break;case 12:o.once(u);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}),[Q,re,M]),ce=a.a.useCallback(function(){var e=Object(d.a)(l.a.mark((function e(n,t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(),e.next=3,ae(n,t);case 3:v((r=e.sent).vertices),v(r.edges),c((function(){return{nodes:r.vertices||x,links:r.edges||k}})),ee("gun");case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),[c,X,ae,ee]);return v("graph:",t),window.graph=t,Object(g.jsxs)("div",{className:"App",style:{"padding-top":"600px"},children:[Object(g.jsx)("label",{children:"Endpoint "}),Object(g.jsx)("input",{value:b,onChange:function(e){h(e.target.value)},type:"text"}),Object(g.jsx)("label",{children:"Root "}),Object(g.jsx)("input",{value:S,onChange:function(e){E(e.target.value)},type:"text"}),Object(g.jsx)("label",{children:"Search "}),Object(g.jsx)("input",{value:P,onChange:function(e){R(e.target.value)},type:"text"}),Object(g.jsx)("label",{children:"Username "}),Object(g.jsx)("input",{value:L,onChange:function(e){G(e.target.value)},type:"text"}),Object(g.jsx)("label",{children:"Password "}),Object(g.jsx)("input",{value:B,onChange:function(e){J(e.target.value)},type:"password"}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{onClick:function(){return ce([S],null)},children:"Load Data from Gun"}),Object(g.jsx)("button",{onClick:function(){return K()},children:"Load Endpoint"}),Object(g.jsx)("button",{onClick:function(){return H()},children:"Toggle Values"}),Object(g.jsx)("div",{style:{height:"1100px",color:"black"},children:Object(g.jsx)(j,{root:m(t,q,P)})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(g.jsx)(y,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[353,1,2]]]);
//# sourceMappingURL=main.a31483ec.chunk.js.map